[tool:pytest]
# GitHub Actions Simulator - ハングアップテスト用 pytest 設定

# テストディスカバリー
testpaths = tests
python_files = test_hangup_*.py test_*hangup*.py
python_classes = Test*Hangup* Test*Scenario* Test*Integration*
python_functions = test_*

# 出力設定
addopts =
    -v
    --tb=short
    --strict-markers
    --strict-config
    --color=yes
    --durations=10
    --maxfail=5

# マーカー定義
markers =
    unit: 単体テスト
    integration: 統合テスト
    e2e: エンドツーエンドテスト
    performance: パフォーマンステスト
    stress: ストレステスト
    slow: 実行時間が長いテスト
    docker: Docker環境が必要なテスト
    mock: モックを使用するテスト
    hangup: ハングアップシナリオテスト
    recovery: 自動復旧テスト
    diagnostic: 診断機能テスト

# フィルタリング
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning:docker.*
    ignore::UserWarning:urllib3.*

# テストタイムアウト（ハングアップテストは短めに設定）
timeout = 60
timeout_method = thread

# 並行実行設定
# -n auto でCPUコア数に応じて並行実行
# addopts = -n auto

# カバレッジ設定（オプション）
# addopts = --cov=services.actions --cov-report=html --cov-report=term

# ログ設定
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# 最小バージョン
minversion = 6.0
