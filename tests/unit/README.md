# ユニットテスト（Unit Tests）

## 目的

このディレクトリには、**外部依存なしで実行可能な純粋なロジックテスト**を配置します。

## 対象

- 単一のクラス・関数の動作検証
- モック・スタブを使った外部依存の隔離
- 高速に実行できるテスト（通常< 1秒/テスト）

## テストファイル例

- `test_execution_tracer.py` - 実行トレーサーロジック
- `test_hangup_detector.py` - ハングアップ検出ロジック
- `test_workflow_parser.py` - ワークフローパーサー
- `test_expression.py` - 式評価エンジン
- `test_performance_monitor.py` - パフォーマンス監視ロジック

## 実行方法

```bash
# ユニットテストのみ実行
make test-unit

# または直接pytest
pytest tests/unit/ -v
```

## ガイドライン

### ✅ ユニットテストに適している

- ビジネスロジックの検証
- データ変換・パース処理
- アルゴリズムの動作確認
- エラーハンドリングの検証

### ❌ ユニットテストに適していない

- Docker操作が必要なテスト → `integration/`へ
- ファイルI/Oが必要なテスト → `integration/`へ
- 複数コンポーネントの連携テスト → `integration/`へ
- エンドツーエンドシナリオ → `e2e/`へ

## テスト作成のベストプラクティス

1. **高速実行**: 1テスト < 1秒を目指す
2. **独立性**: テスト間で状態を共有しない
3. **明確な命名**: `test_<機能>_<条件>_<期待結果>`
4. **適切なモック**: 外部依存は`unittest.mock`または`pytest-mock`でモック化
5. **網羅的**: 正常系・異常系・境界値をカバー
